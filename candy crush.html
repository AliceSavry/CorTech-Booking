<!DOCTYPE html>
<html>
<head>
    <title>Candy Cor-Tech</title>
    <style>
        body { background: #111; color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; font-family: sans-serif; }
        .grid { display: grid; grid-template-columns: repeat(8, 40px); grid-template-rows: repeat(8, 40px); gap: 2px; background: #333; padding: 5px; border-radius: 5px; border: 2px solid #00FFFF; }
        .cell { width: 40px; height: 40px; background: #222; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; user-select: none; }
        .cell:hover { background: #444; }
        .selected { background: #00FFFF !important; color: black; }
        h2 { color: #00FFFF; text-shadow: 0 0 10px #00FFFF; margin-bottom: 10px; }
    </style>
</head>
<body>
    <h2>SCORE: <span id="score">0</span></h2>
    <div class="grid" id="grid"></div>
    <script>
        const grid = document.getElementById('grid');
        const width = 8;
        const candies = ['ğŸ’', 'ğŸ©', 'ğŸª', 'ğŸ', 'ğŸ‡', 'ğŸ‹'];
        let cells = [];
        let score = 0;
        let selected = null;

        function createBoard() {
            for (let i = 0; i < width * width; i++) {
                const cell = document.createElement('div');
                cell.setAttribute('id', i);
                cell.classList.add('cell');
                let randomCandy = Math.floor(Math.random() * candies.length);
                cell.innerHTML = candies[randomCandy];
                grid.appendChild(cell);
                cells.push(cell);
                cell.addEventListener('click', clickCandy);
            }
        }

        function clickCandy() {
            if (!selected) {
                selected = this;
                this.classList.add('selected');
            } else {
                let currentId = parseInt(this.id);
                let prevId = parseInt(selected.id);
                cells[prevId].classList.remove('selected');
                
                // Swap simple pour l'arcade
                let temp = cells[currentId].innerHTML;
                cells[currentId].innerHTML = cells[prevId].innerHTML;
                cells[prevId].innerHTML = temp;
                
                checkMatches();
                selected = null;
            }
        }

        function checkMatches() {
            // Logique simplifiÃ©e horizontale
            for (let i = 0; i < 64; i++) {
                let row = [i, i+1, i+2];
                let decidedColor = cells[i].innerHTML;
                const isBlank = cells[i].innerHTML === '';
                if (i % width < width - 2 && !isBlank) {
                    if (cells[i+1].innerHTML === decidedColor && cells[i+2].innerHTML === decidedColor) {
                        score += 3;
                        document.getElementById('score').innerText = score;
                        row.forEach(index => {
                            cells[index].innerHTML = ''; 
                            // Respawn simple
                            setTimeout(()=> cells[index].innerHTML = candies[Math.floor(Math.random() * candies.length)], 200);
                        });
                    }
                }
            }
        }
        createBoard();
        setInterval(checkMatches, 100);
    </script>
</body>
</html>
